---
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout title="December 26, 2025 Benchmark | QAIL" description="QAIL beats asyncpg! Native Rust is 28% faster for COPY, 2.24x faster for queries.">
    <style>
        .big-number {
            font-size: 6rem;
            font-weight: 900;
            background: linear-gradient(135deg, #22c55e, #06b6d4);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
            margin: 1.5rem 0;
        }

        .benchmark-table {
            width: 100%;
            border-collapse: collapse;
            margin: 2rem 0;
            font-family: 'JetBrains Mono', monospace;
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 8px;
            overflow: hidden;
        }

        .benchmark-table th,
        .benchmark-table td {
            padding: 1rem;
            text-align: right;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .benchmark-table th {
            background: var(--surface-2);
            color: var(--text-muted);
            font-weight: 600;
        }

        .benchmark-table td:first-child {
            text-align: left;
            color: var(--text);
        }

        .benchmark-table .winner {
            color: var(--accent);
            font-weight: bold;
        }

        .benchmark-table .loser {
            color: var(--text-muted);
        }

        .speedup-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--accent), var(--secondary));
            color: var(--bg);
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-weight: bold;
            font-size: 0.875rem;
        }

        .highlight-card {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            text-align: center;
        }

        .highlight-card h3 {
            color: #fff;
            margin: 0 0 1rem;
        }

        .highlight-card .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            color: #e2e8f0;
        }

        .stats-item {
            font-size: 1.25rem;
        }

        .stats-label {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        .disclaimer {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-top: 2rem;
            padding: 1rem;
            background: var(--surface-2);
            border-radius: 0.5rem;
        }
    </style>

    <header class="page-header" style="text-align: center;">
        <div class="container">
            <p style="color: var(--text-muted); margin-bottom: 0.5rem;">December 26, 2025</p>
            <h1>Native Rust Dominates</h1>
            <p class="subtitle">100 million rows. Real-world performance.</p>

            <div class="big-number">1.36M</div>
            <p style="color: var(--text-muted); font-size: 1.25rem;">rows/second COPY (28% faster than asyncpg)</p>
        </div>
    </header>

    <main class="page-content">
        <div class="container">

            <!-- Section 1: COPY Benchmark -->
            <section style="margin-bottom: 3rem;">
                <h2 style="color: var(--primary); font-size: 1.75rem; margin-bottom: 1.5rem; text-align: center;">
                    üìã COPY Bulk Insert Benchmark
                </h2>
                <p style="text-align: center; color: var(--text-muted); margin-bottom: 2rem;">
                    <strong>100 million rows</strong> ‚Ä¢ 10,000 rows per COPY ‚Ä¢ 10,000 COPY operations
                </p>

                <table class="benchmark-table">
                    <thead>
                        <tr>
                            <th>Driver</th>
                            <th>Implementation</th>
                            <th>Rows/Second</th>
                            <th>Time (100M)</th>
                            <th>vs asyncpg</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Native Rust qail-pg</strong></td>
                            <td style="text-align: left;"><img src="/icons/rust.svg" alt="Rust" width="16" height="16" style="vertical-align: middle; margin-right: 4px;"> Pure Rust (Tokio)</td>
                            <td class="winner">1,363,776 üèÜ</td>
                            <td>73.3s</td>
                            <td><span class="speedup-badge">+28%</span></td>
                        </tr>
                        <tr>
                            <td><strong>qail-py</strong></td>
                            <td style="text-align: left;"><img src="/icons/python.svg" alt="Python" width="16" height="16" style="vertical-align: middle; margin-right: 4px;"> Python driver ‚Üí <img src="/icons/rust.svg" alt="Rust" width="16" height="16" style="vertical-align: middle; margin: 0 4px;"> Rust core</td>
                            <td class="winner">1,214,141 ü•à</td>
                            <td>82.4s</td>
                            <td><span class="speedup-badge">+14%</span></td>
                        </tr>
                        <tr>
                            <td><strong>asyncpg</strong></td>
                            <td style="text-align: left;"><img src="/icons/python.svg" alt="Python" width="16" height="16" style="vertical-align: middle; margin-right: 4px;"> Python driver ‚Üí Cython core</td>
                            <td>1,062,942</td>
                            <td>94.1s</td>
                            <td>baseline</td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-card" style="background: linear-gradient(135deg, #2d5a40 0%, #1e3a2f 100%);">
                    <h3>üéâ Production-Scale Results!</h3>
                    <p style="color: #e2e8f0; margin: 0; font-size: 1.1rem;">
                        At 100M rows, PostgreSQL becomes I/O bound. These are <strong>real-world bulk insert speeds</strong>.
                    </p>
                </div>
            </section>

            <!-- Summary Section -->
            <section style="margin-bottom: 3rem;">
                <h2 style="color: var(--primary); font-size: 1.75rem; margin-bottom: 1.5rem; text-align: center;">
                    üìä Summary: QAIL Wins Every Benchmark
                </h2>

                <div class="highlight-card">
                    <div class="stats">
                        <div>
                            <div class="stats-item">+28%</div>
                            <div class="stats-label">COPY (100M rows)</div>
                        </div>
                        <div>
                            <div class="stats-item">2.24x</div>
                            <div class="stats-label">Sequential queries</div>
                        </div>
                        <div>
                            <div class="stats-item">24x</div>
                            <div class="stats-label">Pipelined queries</div>
                        </div>
                    </div>
                </div>

                <table class="benchmark-table">
                    <thead>
                        <tr>
                            <th>Benchmark</th>
                            <th>Native Rust</th>
                            <th>qail-py</th>
                            <th>asyncpg</th>
                            <th>Winner</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>COPY Bulk Insert (100M)</td>
                            <td class="winner">1.36M r/s üèÜ</td>
                            <td>1.21M r/s</td>
                            <td>1.06M r/s</td>
                            <td>Rust ü•á</td>
                        </tr>
                        <tr>
                            <td>Sequential Queries</td>
                            <td class="winner">38.9k q/s</td>
                            <td>27.7k q/s</td>
                            <td>17.4k q/s</td>
                            <td>Rust ü•á</td>
                        </tr>
                        <tr>
                            <td>Pipelined Queries</td>
                            <td class="winner">384.6k q/s</td>
                            <td>122.4k q/s</td>
                            <td>~16k q/s</td>
                            <td>Rust ü•á</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Test Environment -->
            <section style="margin-bottom: 3rem;">
                <h2 style="color: var(--primary); font-size: 1.75rem; margin-bottom: 1.5rem; text-align: center;">
                    üî¨ Test Environment
                </h2>

                <div style="background: var(--surface-2); border-radius: 12px; padding: 1.5rem; text-align: left;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; font-size: 0.9rem;">
                        <div>
                            <strong>Hardware:</strong>
                            <ul style="margin: 0.5rem 0; padding-left: 1.2rem; opacity: 0.9;">
                                <li>Apple M3 Pro</li>
                                <li>macOS (arm64)</li>
                                <li>localhost PostgreSQL</li>
                            </ul>
                        </div>
                        <div>
                            <strong>Software:</strong>
                            <ul style="margin: 0.5rem 0; padding-left: 1.2rem; opacity: 0.9;">
                                <li>PostgreSQL 18</li>
                                <li>Python 3.13.7</li>
                                <li>Rust stable</li>
                            </ul>
                        </div>
                        <div>
                            <strong>Test Config:</strong>
                            <ul style="margin: 0.5rem 0; padding-left: 1.2rem; opacity: 0.9;">
                                <li>Single connection</li>
                                <li>No pooling</li>
                                <li>Prepared statements</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CTA -->
            <section style="text-align: center; padding: 3rem 0;">
                <h2 style="font-size: 2rem; margin-bottom: 1rem; color: var(--text);">Try QAIL Today</h2>
                <p style="font-size: 1.25rem; color: var(--text-muted); max-width: 600px; margin: 0 auto 2rem;">
                    The fastest PostgreSQL driver for Python and Rust.
                </p>

                <a href="https://github.com/qail-io/qail" target="_blank" class="btn btn-primary"
                    style="margin-top: 1rem; display: inline-flex; align-items: center; gap: 0.5rem;">
                    <svg height="20" width="20" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                    Star on GitHub
                </a>

                <p style="margin-top: 2rem;">
                    <a href="/benchmarks" style="color: var(--primary);">‚Üê Back to all benchmarks</a>
                </p>
            </section>

        </div>
    </main>
</BaseLayout>
