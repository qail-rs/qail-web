---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout
    title="Examples | QAIL"
    description="See QAIL AST builder and text syntax in action with real-world examples."
>
    <header class="page-header">
        <div class="container">
            <h1>Examples</h1>
            <p class="subtitle">AST Builder API vs Text Syntax</p>
        </div>
    </header>

    <main class="page-content">
        <div class="container prose">
            <!-- AST Builder Examples -->
            <section>
                <h2>AST Builder API (Recommended)</h2>
                <p style="color: var(--text-muted);">
                    Build queries as typed Rust structs. No parsing. No strings.
                </p>

                <div class="comparison-grid">
                    <div class="code-block qail">
                        <small>Select all users</small>
                        <code>Qail::get("users") .select_all()</code>
                    </div>
                    <div class="code-block sql">
                        <small>Wire Protocol Output</small>
                        <code>SELECT * FROM users</code>
                    </div>
                </div>

                <div class="comparison-grid" style="margin-top: 1.5rem;">
                    <div class="code-block qail">
                        <small>Filter with conditions</small>
                        <code
                            >Qail::get("users") .columns(["id", "email"])
                            .filter("active", Eq, true) .order_by("created_at",
                            Desc) .limit(10)</code
                        >
                    </div>
                    <div class="code-block sql">
                        <small>Wire Protocol Output</small>
                        <code
                            >SELECT id, email FROM users WHERE active = true
                            ORDER BY created_at DESC LIMIT 10</code
                        >
                    </div>
                </div>

                <div class="comparison-grid" style="margin-top: 1.5rem;">
                    <div class="code-block qail">
                        <small>Insert with returning</small>
                        <code
                            >Qail::add("users") .columns(["email", "name"])
                            .values(["alice@example.com", "Alice"])
                            .returning_all()</code
                        >
                    </div>
                    <div class="code-block sql">
                        <small>Wire Protocol Output</small>
                        <code
                            >INSERT INTO users (email, name) VALUES
                            ('alice@example.com', 'Alice') RETURNING *</code
                        >
                    </div>
                </div>

                <div class="comparison-grid" style="margin-top: 1.5rem;">
                    <div class="code-block qail">
                        <small>Join tables</small>
                        <code
                            >Qail::get("users") .columns(["name", "avatar"])
                            .left_join("profiles", "users.id",
                            "profiles.user_id")</code
                        >
                    </div>
                    <div class="code-block sql">
                        <small>Wire Protocol Output</small>
                        <code
                            >SELECT name, avatar FROM users LEFT JOIN profiles
                            ON users.id = profiles.user_id</code
                        >
                    </div>
                </div>
            </section>

            <!-- Text Syntax Examples -->
            <section style="margin-top: 3rem;">
                <h2>Text Syntax (CLI, LSP, WASM)</h2>
                <p style="color: var(--text-muted);">
                    Human-readable syntax for developer tools. Parses to AST
                    internally.
                </p>

                <div class="comparison-grid">
                    <div class="code-block qail">
                        <small>Select all users</small>
                        <code>get users fields *</code>
                    </div>
                    <div class="code-block sql">
                        <small>Transpiled SQL</small>
                        <code>SELECT * FROM users</code>
                    </div>
                </div>

                <div class="comparison-grid" style="margin-top: 1.5rem;">
                    <div class="code-block qail">
                        <small>Filter with conditions</small>
                        <code
                            >get users fields id, email where active = true
                            order by created_at desc limit 10</code
                        >
                    </div>
                    <div class="code-block sql">
                        <small>Transpiled SQL</small>
                        <code
                            >SELECT id, email FROM users WHERE active = true
                            ORDER BY created_at DESC LIMIT 10</code
                        >
                    </div>
                </div>

                <div class="comparison-grid" style="margin-top: 1.5rem;">
                    <div class="code-block qail">
                        <small>Fuzzy search</small>
                        <code
                            >get users fields id, name where name ilike john</code
                        >
                    </div>
                    <div class="code-block sql">
                        <small>Transpiled SQL</small>
                        <code
                            >SELECT id, name FROM users WHERE name ILIKE
                            '%john%'</code
                        >
                    </div>
                </div>
            </section>

            <!-- Comparison Table -->
            <section style="margin-top: 3rem;">
                <h2>AST Builder vs Others</h2>
                <div class="market-table-container">
                    <table class="market-table">
                        <thead>
                            <tr>
                                <th>Feature</th>
                                <th>Raw SQL</th>
                                <th>ORMs</th>
                                <th>Query Builders</th>
                                <th class="highlight">QAIL AST</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>String-free</td>
                                <td class="cross">✕</td>
                                <td class="cross">✕</td>
                                <td class="cross">✕</td>
                                <td class="check">✓</td>
                            </tr>
                            <tr>
                                <td>Injection Impossible</td>
                                <td class="cross">✕</td>
                                <td class="cross">✕ (via .raw())</td>
                                <td class="cross">✕</td>
                                <td class="check">✓</td>
                            </tr>
                            <tr>
                                <td>Wire Protocol Direct</td>
                                <td class="cross">✕</td>
                                <td class="cross">✕</td>
                                <td class="cross">✕</td>
                                <td class="check">✓</td>
                            </tr>
                            <tr>
                                <td>Multi-Database</td>
                                <td class="cross">✕</td>
                                <td class="check">✓</td>
                                <td class="check">✓</td>
                                <td class="check">✓</td>
                            </tr>
                            <tr>
                                <td>Type-Safe End-to-End</td>
                                <td class="cross">✕</td>
                                <td class="check">✓</td>
                                <td class="cross">✕</td>
                                <td class="check">✓</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>
</BaseLayout>
